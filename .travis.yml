# DrFTPD travis config by eN0Rm
stages:
  - build
  - test

language: java
sudo: false
jdk:
  - openjdk8
  - openjdk11

# stages and jobs #

jobs:
    fast_finish: true
    allow_failures:
      - jdk: openjdk11
    include:
      - stage: build
        name: "Building on Linux"
        dist: trusty
        script:
          - echo PATH = ${PATH}
          - echo JAVA_HOME = ${JAVA_HOME}
          - java -version
          - ant -version
          - ./genkey.sh
          - ./build.sh -a
      - stage: test
        name: "Testing on Linux"
        dist: trusty
        on_failure: never
        script:
          - echo PATH = ${PATH}
          - echo JAVA_HOME = ${JAVA_HOME}
          - java -version
          - ant -version
          - ant test

# irc notification #

notifications:
  irc: "ircs://efnet.port80.se:6697/#drftpd"